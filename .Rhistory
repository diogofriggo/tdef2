fc <- hw(subset(hyndsight, end=length(hyndsight)-l), damped=T, seasonal="multiplicative", h=l)
autoplot(hyndsight) +
autolayer(fc, series="HW multi damped", PI=F) +
guides(colour=guide_legend(title="Daily forecasts"))
fc <- hw(subset(hyndsight,end=length(hyndsight)-35),
damped = TRUE, seasonal="multiplicative", h=35)
autoplot(hyndsight) +
autolayer(fc, series="HW multi damped", PI=FALSE)+
guides(colour=guide_legend(title="Daily forecasts"))
autoplot(hyndsight) +
autolayer(fc, series="HW multi damped", PI=F) +
guides(colour=guide_legend(title="Daily forecasts"))
fc <- hw(subset(hyndsight, end=length(hyndsight)-l), damped=F, seasonal="multiplicative", h=l)
autoplot(hyndsight) +
autolayer(fc, series="HW multi damped", PI=F) +
guides(colour=guide_legend(title="Daily forecasts"))
fc <- hw(subset(hyndsight,end=length(hyndsight)-35),
damped = TRUE, seasonal="multiplicative", h=35)
autoplot(hyndsight) +
autolayer(fc, series="HW multi damped", PI=FALSE)+
guides(colour=guide_legend(title="Daily forecasts"))
fc <- hw(subset(hyndsight,end=length(hyndsight)-120),
damped = TRUE, seasonal="multiplicative", h=120)
autoplot(hyndsight) +
autolayer(fc, series="HW multi damped", PI=FALSE)+
guides(colour=guide_legend(title="Daily forecasts"))
fc <- hw(subset(hyndsight,end=length(hyndsight)-120),
damped = F, seasonal="multiplicative", h=120)
fc <- hw(subset(hyndsight,end=length(hyndsight)-120),
damped = F, seasonal="multiplicative", h=120)
autoplot(hyndsight) +
autolayer(fc, series="HW multi damped", PI=FALSE)+
guides(colour=guide_legend(title="Daily forecasts"))
fc <- hw(subset(hyndsight,end=length(hyndsight)-120),
damped = F, seasonal="additive", h=120)
autoplot(hyndsight) +
autolayer(fc, series="HW multi damped", PI=FALSE)+
guides(colour=guide_legend(title="Daily forecasts"))
aust <- window(austourists, end=2008)
fit1 <- hw(aust, seasonal="additive", h=32, damped=F)
fit2 <- hw(aust, seasonal="multiplicative", h=32, damped=F)
autoplot(austourists) +
autolayer(fit1, series="HW additive forecasts", PI=F) +
autolayer(fit2, series="HW multiplicative forecasts", PI=F) +
ylab("Visitor nights (millions)") +
ggtitle("International visitors nights in Australia") +
guides(colour=guide_legend(title="Forecast"))
l <- 120
fc <- hw(subset(hyndsight, end=length(hyndsight)-l), damped=F, seasonal="multiplicative", h=l)
autoplot(hyndsight) +
autolayer(fc, series="HW multi damped", PI=F) +
guides(colour=guide_legend(title="Daily forecasts"))
aust <- window(austourists, start=2005)
fit <- ets(aust)
summary(fit)
autoplot(fit)
cbind('Residuals' = residuals(fit),
'Forecast errors'= residuals(fit, type='response')) %>%
autoplot(facet=T + xlab('Year') + ylab(''))
cbind('Residuals' = residuals(fit),
'Forecast errors'= residuals(fit, type='response')) %>%
autoplot(facet=T + xlab('Year') + ylab(''))
cbind('Residuals' = residuals(fit), 'Forecast errors'= residuals(fit, type='response')) %>%
autoplot(facet=T) + xlab('Year') + ylab('')
fit %>% forecast(h=8) %>% autoplot() +
ylab("International visitor night in Australia (millions)")
fit %>% forecast(h=8) %>% autoplot(series='Fitted') +
autolayer(austourists, series="Data", PI=F) +
ylab("International visitor night in Australia (millions)")
aust <- window(austourists, end=2010)
fit <- ets(aust)
fit %>% forecast(h=8) %>% autoplot(series='Fitted') +
autolayer(austourists, series="Data", PI=F) +
ylab("International visitor night in Australia (millions)")
fit %>% forecast(h=20) %>% autoplot(series='Fitted') +
autolayer(austourists, series="Data", PI=F) +
ylab("International visitor night in Australia (millions)")
fit %>% forecast(h=20) %>% autoplot(series='Fitted') +
autolayer(austourists, series="Data", PI=F) +
ylab("International visitor night in Australia (millions)")
aust <- window(austourists, end=2000)
aust <- window(austourists, end=2000)
fit <- ets(aust)
fit %>% forecast(h=20) %>% autoplot(series='Fitted') +
autolayer(austourists, series="Data", PI=F) +
ylab("International visitor night in Australia (millions)")
aust <- window(austourists, end=2002)
fit <- ets(aust)
fit %>% forecast(h=20) %>% autoplot(series='Fitted') +
autolayer(austourists, series="Data", PI=F) +
ylab("International visitor night in Australia (millions)")
aust <- window(austourists, end=2004)
fit <- ets(aust)
fit %>% forecast(h=20) %>% autoplot(series='Fitted') +
autolayer(austourists, series="Data") +
ylab("International visitor night in Australia (millions)")
austourists
aust <- window(austourists, end=2008)
fit <- ets(aust)
fit %>% forecast(h=20) %>% autoplot(series='Fitted') +
autolayer(austourists, series="Data") +
ylab("International visitor night in Australia (millions)")
fit %>% forecast(h=40) %>% autoplot(series='Fitted') +
autolayer(austourists, series="Data") +
ylab("International visitor night in Australia (millions)")
fit %>% forecast(h=35) %>% autoplot(series='Fitted') +
autolayer(austourists, series="Data") +
ylab("International visitor night in Australia (millions)")
aust <- window(austourists, end=2006)
fit <- ets(aust)
fit %>% forecast(h=35) %>% autoplot(series='Fitted') +
autolayer(austourists, series="Data") +
ylab("International visitor night in Australia (millions)")
aust <- window(austourists, end=2005)
fit <- ets(aust)
fit %>% forecast(h=35) %>% autoplot(series='Fitted') +
autolayer(austourists, series="Data") +
ylab("International visitor night in Australia (millions)")
aust <- window(austourists, end=2007)
fit <- ets(aust)
fit %>% forecast(h=35) %>% autoplot(series='Fitted') +
autolayer(austourists, series="Data") +
ylab("International visitor night in Australia (millions)")
aust <- window(austourists, end=2008)
fit <- ets(aust)
fit %>% forecast(h=35) %>% autoplot(series='Fitted') +
autolayer(austourists, series="Data") +
ylab("International visitor night in Australia (millions)")
Box.test(diff(goog200), lag=10, type='Ljung-Box')
gridExtra::grid.arrange(ggAcf(goog200), ggAcf(diff(goog200)))
a10
cbind("Sales ($million)" = a10,
"Monthly log sales" = log(a10),
"Annual change in log sales" = diff(log(a10), 12)) %>%
autoplot(facet=T) + xlab("Year") + ylab("") +
ggtitle("Antidiabetic drug sales")
gridExtra::grid.arrange(ggAcf(a10), ggAcf(log(a10)), ggAcf(diff(log(a10), 12))
gridExtra::grid.arrange(ggAcf(a10), ggAcf(log(a10)), ggAcf(diff(log(a10), 12)))
gridExtra::grid.arrange(
ggAcf(a10),
ggAcf(log(a10)),
ggAcf(diff(log(a10), 12)),nrow=3)
lag = 20
Box.test(a10, lag=lag, type='Ljung-Box')
Box.test(log(a10), lag=lag, type='Ljung-Box')
Box.test(diff(log(a10), 12)), lag=lag, type='Ljung-Box')
lag = 20
Box.test(a10, lag=lag, type='Ljung-Box')
Box.test(log(a10), lag=lag, type='Ljung-Box')
Box.test(diff(log(a10), 12), lag=lag, type='Ljung-Box')
lag = 1
Box.test(a10, lag=lag, type='Ljung-Box')
Box.test(log(a10), lag=lag, type='Ljung-Box')
Box.test(diff(log(a10), 12), lag=lag, type='Ljung-Box')
cbind("Billion Kwh" = usmelec,
"Logs" = log(usmelec),
"Seasonally\n differenced logs" = diff(log(usmelec), 12),
"Doubly\n differenced logs" = diff(diff(log(usmelec), 12))) %>%
autoplot(facets=T) +
xlab("Year") + ylab("") +
ggtitle("Monthly US net electricity generation")
library(urca)
goog %>% ur.kpss() %>% summary()
goog %>% diff() %>% ur.kpss() %>% summary()
ndiffs(goog)
nsdiffs(goog)
nsdiffs(elecsales)
nsdiffs(elecequip)
usmelec %>% nsdiffs()
usmelec %>% diff() %>% nsdiffs()
usmelec %>% nsdiffs()
usmelec %>% diff(lag=12) %>% nsdiffs()
usmelec %>% log() %>% nsdiffs()
usmelec %>% log() %>% diff(lag=12) %>% nsdiffs()
library(tidyverse)
setwd('/home/diogo/Jupyter/tdef')
path <- '/home/diogo/Jupyter/tdef/Vestas V150-4.0-4.2 MW PO1.txt'
read.csv(path)
df <- read.csv(path, sep='\t')
df
df
df <- read.table(path, col.names=c('speed', 'power'))
df
df %>% ggplot(aes(x=speed, y=power)) %>% geom_line()
df %>% ggplot(aes(x=speed, y=power)) + geom_line()
df
df %>% add_row(speed=25, power=0)
df
df <- read.table(path, col.names=c('speed', 'power')) %>% add_row(speed=25, power=0)
df
df %>% ggplot(aes(x=speed, y=power)) + geom_line()
df <- read.table(path, col.names=c('speed', 'power')) %>% add_row(speed=26, power=0)
df %>% ggplot(aes(x=speed, y=power)) + geom_line()
df <- read.table(path, col.names=c('speed', 'power')) %>% add_row(speed=26.5, power=0)
df %>% ggplot(aes(x=speed, y=power)) + geom_line()
library(tidyverse)
library(lubridate)
library(forecast)
library(FinTS)
library(tseries)
library(rugarch)
library(chron)
setwd('/home/diogo/Jupyter/tdef')
path <- '/home/diogo/Jupyter/tdef/Res025_ERA5.txt'
my_accuracy <- function(forecast, observed){
accuracy(forecast, observed[(length(observed)-length(forecast)+1):length(observed)])
}
garch_plot <- function(data, modelroll, title, filename, multiplier, forecast_length){
measured <- data[(length(data)-multiplier*forecast_length):(length(data)-1)]
print(measured %>% length())
forecast.lower80 <- modelroll@forecast$VaR[,'alpha(30%)']
forecast.lower95 <- modelroll@forecast$VaR[,'alpha(10%)']
forecast.mean <- modelroll@forecast$density[,'Mu']
forecast.upper80 <- modelroll@forecast$VaR[,'alpha(70%)']
forecast.upper95 <- modelroll@forecast$VaR[,'alpha(90%)']
print(forecast.mean %>% length())
print(forecast_length)
ggplot.data <- c(measured[1:length(measured)], forecast.mean)
type <- c(rep('measured', length(measured)), rep('forecast', length(forecast.mean)))
time <- c(1:length(measured), (length(measured)-length(forecast.mean)+1):length(measured))
nans <- rep(NA, length(measured))
df1 <- tibble(time=time, speed=ggplot.data, type=type,
lower80=c(nans, forecast.lower80), upper80=c(nans, forecast.upper80),
lower95=c(nans, forecast.lower95), upper95=c(nans, forecast.upper95))
df2 <- df1[(length(measured)+1):length(ggplot.data),]
# ggplot(data=df2, aes(x=time)) +
#   geom_ribbon(aes(ymin=lower95, ymax=upper95, fill='95% level'), alpha=1) +
#   geom_ribbon(aes(ymin=lower80, ymax=upper80, fill='80% level'), alpha=1) +
#   geom_line(data=df1, aes(y=speed, colour=type), size=0.9) +
#   scale_fill_manual(values=c('#7D7DEF', '#C3C3F6'), name="fill") +
#   scale_color_manual(values = c('gold','black'))+
#   labs(x='Tempo', y='Velocidade (m/s)') +
#   ggtitle(title)
#
# ggsave(paste('thesis/images', filename, sep='/'))
# print(my_accuracy(forecast.mean, measured))
my_accuracy(forecast.mean, measured)
}
do_hourly_garch <- function(path, forecast_length){
data <- read_table2(path, skip=9, comment="--") %>%
tail(-3) %>%
mutate(time=with_tz(ymd_hms(paste(Date, `Time(UTC)`)), tzone='Brazil/East')) %>%
mutate(hour=hour(time), day=date(time), month=month(time,label=TRUE, abbr=FALSE), year=year(time)) %>%
mutate(year_month = paste(year, month)) %>%
rename(speed=c_ws)
hourly.data <- data[(nrow(data)-365*24):nrow(data),]$speed
print(hourly.data %>% length())
ugarch_spec <- ugarchspec(variance.model = list(model='gjrGARCH', garchOrder = c(1,1)),
mean.model = list(armaOrder = c(1,0), include.mean = T),
distribution.model =  "sstd")
modelroll <- ugarchroll (
spec=ugarch_spec, data=hourly.data, n.ahead = 1, forecast_length = forecast_length,
n.start = NULL, refit.every = 50, refit.window = c("recursive"),
window.size = NULL, solver = "hybrid", fit.control = list(),
solver.control = list(), calculate.VaR = T, VaR.alpha = c(0.3, 0.7, 0.1, 0.90),
cluster = NULL, keep.coef = F
)
list(hourly.data, modelroll)
}
forecast_length <- 24*7
result <- do_hourly_garch(path, forecast_length)
hourly.data <- result[[1]]
modelroll <- result[[2]]
title <- paste('GARCH(1,1) com janela de 50 horas e passo de 1 hora')
garch_plot(hourly.data, modelroll, title, 'garch_first.png', 4, forecast_length)
forecast.mean <- modelroll@forecast$density[,'Mu']
ptm <- proc.time()
root <- '/home/diogo/Downloads/ERA5'
paths <- list.files(path=root, pattern="*.txt", full.names=TRUE, recursive=FALSE)
forecast.mean <- modelroll@forecast$density[,'Mu']
forecast.mean
match
path <- '/home/diogo/Jupyter/tdef/Vestas V150-4.0-4.2 MW PO1.txt'
df <- read.table(path, col.names=c('speed', 'power')) %>% add_row(speed=26.5, power=0)
match(forecast.mean,df$speed)
match(df$speed, forecast.mean)
df$speed
forecast.mean
df
df - 4.7
min(df - 4.7)
(df$speed - 4.7) %>% abs()
(df$speed - 4.7)
df
df['closest'] = abs(df$speed-4.7)
df
df %>% sort()
df %>% sort(closet)
df %>% sort(closest)
df %>% arrange(closest)
(df %>% arrange(closest))$power
(df %>% arrange(closest))$power[[1]]
(df %>% arrange(closest))$power[1]
(df %>% arrange(closest))$power[[1]]
(df %>% arrange(closest))$power %>% first()
df %>% arrange(closest) %>% first()
(df %>% arrange(closest))$power %>% first()
forecast.mean <- modelroll@forecast$density[,'Mu'] %>% as.tibble(colnames=c('speed'))
forecast.mean <- modelroll@forecast$density[,'Mu'] %>% as_tibble(colnames=c('speed'))
forecast.mean <- tibble(modelroll@forecast$density[,'Mu'], colnames=c('speed'))
forecast.mean <- tibble(modelroll@forecast$density[,'Mu'], colnames=c('speed'))
forecast.mean
forecast.mean <- tibble(modelroll@forecast$density[,'Mu'])
forecast.mean
forecast.mean <- tibble(speed=modelroll@forecast$density[,'Mu'])
forecast.mean
join(forecast.mean, df, by='speed')
library(plyr)
join(forecast.mean, df, by='speed')
path <- '/home/diogo/Jupyter/tdef/Vestas V150-4.0-4.2 MW PO1.txt'
df <- read.table(path, col.names=c('speed', 'power')) %>% add_row(speed=26.5, power=0)
forecast.mean <- tibble(speed=modelroll@forecast$density[,'Mu'])
library(plyr)
join(forecast.mean, df, by='speed')
join(forecast.mean, df, by='speed') %>% head()
df
df <- read.table(path, col.names=c('speed', 'power')) %>% add_row(speed=26.5, power=0) %>% as_tibble()
forecast.mean <- tibble(speed=modelroll@forecast$density[,'Mu'])
library(plyr)
join(forecast.mean, df, by='speed') %>% head()
df
forecast.mean
join(forecast.mean, df, by='speed') %>% head()
cut(cars$speed, breaks=df$speed)
df$interval <- cut(cars$speed, breaks=df$speed)
df
df$interval <- cut(forecast.mean, breaks=df$speed)
df %>% head()
df$interval <- cut(forecast.mean, breaks=df$speed)
df$interval <- cut(forecast.mean$speed, breaks=df$speed)
forecast.mean$speed
cut(forecast.mean$speed, breaks=df$speed)
df$interval <- cut(forecast.mean$speed, breaks=df$speed)
df <- read.table(path, col.names=c('speed', 'power')) %>% add_row(speed=26.5, power=0) %>% as_tibble()
df$interval <- cut(forecast.mean$speed, breaks=df$speed)
cut(forecast.mean$speed, breaks=df$speed)
cut(forecast.mean$speed, breaks=df$speed) %>% attributes()
df$interval <- cut(forecast.mean$speed, breaks=df$speed) %>% str()
cut(forecast.mean$speed, breaks=df$speed) %>% str()
df$interval <- cut(forecast.mean$speed, breaks=df$speed) %>% as.numeric()
cut(forecast.mean$speed, breaks=df$speed) %>% as.numeric()
df
#library(plyr)
#join(forecast.mean, df, by='speed') %>% head()
#df
forecast.mean$interval <- cut(forecast.mean$speed, breaks=df$speed)
forecast.mean
join(forecast.mean, df, by='interval') %>% head()
#library(plyr)
#
#df
forecast.mean$interval <- cut(forecast.mean$speed, breaks=df$speed)
df$interval <- cut(df$speed, breaks=df$speed)
join(forecast.mean, df, by='interval') %>% head()
df <- select(df, -c(speed))
df
df <- read.table(path, col.names=c('speed', 'power')) %>% add_row(speed=26.5, power=0) %>% as_tibble()
path <- '/home/diogo/Jupyter/tdef/Vestas V150-4.0-4.2 MW PO1.txt'
df <- read.table(path, col.names=c('speed', 'power')) %>% add_row(speed=26.5, power=0) %>% as_tibble()
df$interval <- cut(df$speed, breaks=df$speed)
df <- select(df, -c(speed))
df
df <- read.table(path, col.names=c('speed', 'power')) %>% add_row(speed=26.5, power=0) %>% as_tibble()
df
#library(plyr)
#
#df
forecast.mean$interval <- cut(forecast.mean$speed, breaks=c(-1,df$speed))
path <- '/home/diogo/Jupyter/tdef/Vestas V150-4.0-4.2 MW PO1.txt'
df <- read.table(path, col.names=c('speed', 'power')) %>% add_row(speed=26.5, power=0) %>% as_tibble()
forecast.mean <- tibble(speed=modelroll@forecast$density[,'Mu'])
forecast.mean$interval <- cut(forecast.mean$speed, breaks=c(-1,df$speed))
df$interval <- cut(df$speed, breaks=c(-1,df$speed))
df <- select(df, -c(speed))
df
join(forecast.mean, df, by='interval') %>% head()
fdf %>% ggplot(aes(x=x, y=power)) + geom_line()
fdf <- join(forecast.mean, df, by='interval') %>% head()
fdf$x <- 1:nrow(fdf)
fdf %>% ggplot(aes(x=x, y=power)) + geom_line()
fdf
fdf <- join(forecast.mean, df, by='interval')
fdf$x <- 1:nrow(fdf)
fdf %>% ggplot(aes(x=x, y=power)) + geom_line()
fdf %>% ggplot(aes(x=x)) + geom_line(aes(y=power)) + geom_line(aes(y=speed))
plot1 <- fdf %>% ggplot(aes(x=x)) + geom_line(aes(y=power))
plot2 <- fdf %>% ggplot(aes(x=x)) + geom_line(aes(y=speed))
grid.arrange(plot1, plot2, nrow=2)
require(gridExtra)
grid.arrange(plot1, plot2, nrow=2)
grid.arrange(plot1, plot2, nrow=2) +
labs(x = 'Tempo (hora)', y = 'Velocidade (m/s)') +
ggtitle('Velocidade do vento em base horária')
path <- '/home/diogo/Jupyter/tdef/Vestas V150-4.0-4.2 MW PO1.txt'
df <- read.table(path, col.names=c('speed', 'power')) %>% add_row(speed=26.5, power=0) %>% as_tibble()
forecast.mean <- tibble(speed=modelroll@forecast$density[,'Mu'])
forecast.mean$interval <- cut(forecast.mean$speed, breaks=c(-1,df$speed))
df$interval <- cut(df$speed, breaks=c(-1,df$speed))
df <- select(df, -c(speed))
fdf <- join(forecast.mean, df, by='interval')
fdf$x <- 1:nrow(fdf)
plot1 <- fdf %>% ggplot(aes(x=x)) + geom_line(aes(y=power)) +
labs(x = 'Tempo (hora)', y = 'Potência (W)') +
ggtitle('Potência desenvolvida por uma turbina em base horária')
plot2 <- fdf %>% ggplot(aes(x=x)) + geom_line(aes(y=speed)) +
labs(x = 'Tempo (hora)', y = 'Velocidade (m/s)') +
ggtitle('Velocidade do vento em base horária')
require(gridExtra)
grid.arrange(plot1, plot2, nrow=2)
ggsave('thesis/images/speed_power.png', arrangeGrob(plot1, plot2))
df %>% ggplot(aes(x=speed, y=power)) %>% geom_line()
ggsave('thesis/images/power_curve.png'
df %>% ggplot(aes(x=speed, y=power)) + geom_line()
ggsave('thesis/images/power_curve.png'
df %>% ggplot(aes(x=speed, y=power)) + geom_line()
ggsave('thesis/images/power_curve.png')
path <- '/home/diogo/Jupyter/tdef/Vestas V150-4.0-4.2 MW PO1.txt'
df <- read.table(path, col.names=c('speed', 'power')) %>% add_row(speed=26.5, power=0) %>% as_tibble()
df %>% ggplot(aes(x=speed, y=power)) + geom_line()
ggsave('thesis/images/power_curve.png')
path <- '/home/diogo/Jupyter/tdef/Vestas V150-4.0-4.2 MW PO1.txt'
df <- read.table(path, col.names=c('speed', 'power')) %>% add_row(speed=26.5, power=0) %>% as_tibble()
df %>% ggplot(aes(x=speed, y=power)) + geom_line() +
labs(x = 'Tempo (hora)', y = 'Potência (W)') +
ggtitle('Curva de potência de uma turbina genérica')
ggsave('thesis/images/power_curve.png')
df <- select(df, -c(speed))
fdf <- join(forecast.mean, df, by='interval')
fdf$x <- 1:nrow(fdf)
plot1 <- fdf %>% ggplot(aes(x=x)) + geom_line(aes(y=power)) +
labs(x = 'Velocidade (m/s)', y = 'Potência (W)') +
ggtitle('Potência desenvolvida por uma turbina em base horária')
plot2 <- fdf %>% ggplot(aes(x=x)) + geom_line(aes(y=speed)) +
labs(x = 'Tempo (hora)', y = 'Velocidade (m/s)') +
ggtitle('Velocidade do vento em base horária')
require(gridExtra)
grid.arrange(plot1, plot2, nrow=2)
ggsave('thesis/images/speed_power.png', arrangeGrob(plot1, plot2))
path <- '/home/diogo/Jupyter/tdef/Vestas V150-4.0-4.2 MW PO1.txt'
df <- read.table(path, col.names=c('speed', 'power')) %>% add_row(speed=26.5, power=0) %>% as_tibble()
df %>% ggplot(aes(x=speed, y=power)) + geom_line() +
labs(x = 'Velocidade (m/s)', y = 'Potência (W)') +
ggtitle('Curva de potência de uma turbina genérica')
ggsave('thesis/images/power_curve.png')
forecast.mean <- tibble(speed=modelroll@forecast$density[,'Mu'])
forecast.mean$interval <- cut(forecast.mean$speed, breaks=c(-1,df$speed))
df$interval <- cut(df$speed, breaks=c(-1,df$speed))
df <- select(df, -c(speed))
fdf <- join(forecast.mean, df, by='interval')
fdf$x <- 1:nrow(fdf)
plot1 <- fdf %>% ggplot(aes(x=x)) + geom_line(aes(y=power)) +
labs(x = 'Tempo (hora)', y = 'Potência (W)') +
ggtitle('Potência desenvolvida por uma turbina em base horária')
plot2 <- fdf %>% ggplot(aes(x=x)) + geom_line(aes(y=speed)) +
labs(x = 'Tempo (hora)', y = 'Velocidade (m/s)') +
ggtitle('Velocidade do vento em base horária')
require(gridExtra)
grid.arrange(plot1, plot2, nrow=2)
ggsave('thesis/images/speed_power.png', arrangeGrob(plot1, plot2))
path <- '/home/diogo/Jupyter/tdef/Vestas V150-4.0-4.2 MW PO1.txt'
df <- read.table(path, col.names=c('speed', 'power')) %>% add_row(speed=26.5, power=0) %>% as_tibble()
df %>% ggplot(aes(x=speed, y=power)) + geom_line() +
labs(x = 'Velocidade (m/s)', y = 'Potência (W)') +
ggtitle('Curva de potência de uma turbina genérica')
ggsave('thesis/images/power_curve.png')
forecast.mean <- tibble(speed=modelroll@forecast$density[,'Mu'])
forecast.mean$interval <- cut(forecast.mean$speed, breaks=c(-1,df$speed))
df$interval <- cut(df$speed, breaks=c(-1,df$speed))
df <- select(df, -c(speed))
fdf <- join(forecast.mean, df, by='interval')
fdf$x <- 1:nrow(fdf)
plot2 <- fdf %>% ggplot(aes(x=x)) + geom_line(aes(y=power)) +
labs(x = 'Tempo (hora)', y = 'Potência (W)') +
ggtitle('Potência desenvolvida por uma turbina em base horária')
plot1 <- fdf %>% ggplot(aes(x=x)) + geom_line(aes(y=speed)) +
labs(x = 'Tempo (hora)', y = 'Velocidade (m/s)') +
ggtitle('Velocidade do vento em base horária')
require(gridExtra)
grid.arrange(plot1, plot2, nrow=2)
ggsave('thesis/images/speed_power.png', arrangeGrob(plot1, plot2))
fdf
nrow(fdf)
fdf$power
fdf$power %>% sum()
fdf$power %>% sum() /3600
fdf$power %>% sum() / 3600
fdf$power %>% sum()*nrow(fdf) / 3600
fdf$power %>% sum() / 3600
path <- '/home/diogo/Jupyter/tdef/Vestas V150-4.0-4.2 MW PO1.txt'
df <- read.table(path, col.names=c('speed', 'power')) %>% add_row(speed=26.5, power=0) %>% as_tibble()
df %>% ggplot(aes(x=speed, y=power)) + geom_line() +
labs(x = 'Velocidade (m/s)', y = 'Potência (kW)') +
ggtitle('Curva de potência de uma turbina genérica')
ggsave('thesis/images/power_curve.png')
forecast.mean <- tibble(speed=modelroll@forecast$density[,'Mu'])
forecast.mean$interval <- cut(forecast.mean$speed, breaks=c(-1,df$speed))
df$interval <- cut(df$speed, breaks=c(-1,df$speed))
df <- select(df, -c(speed))
fdf <- join(forecast.mean, df, by='interval')
fdf$x <- 1:nrow(fdf)
plot2 <- fdf %>% ggplot(aes(x=x)) + geom_line(aes(y=power)) +
labs(x = 'Tempo (hora)', y = 'Potência (kW)') +
ggtitle('Potência desenvolvida por uma turbina em base horária')
plot1 <- fdf %>% ggplot(aes(x=x)) + geom_line(aes(y=speed)) +
labs(x = 'Tempo (hora)', y = 'Velocidade (m/s)') +
ggtitle('Velocidade do vento em base horária')
require(gridExtra)
grid.arrange(plot1, plot2, nrow=2)
ggsave('thesis/images/speed_power.png', arrangeGrob(plot1, plot2))
nrow(fdf)
fdf$power %>% sum() / 3600
fdf$power %>% sum()
